{% extends "base.html" %}
{% block content %}
<div class="flex  flex-end justify-center mt-12 container mx-auto px-">
    <div class="w-1/3 w-full">
        <img src="{{ movie.poster.url }}" class="rounded-3xl float-right h-96 mr-6" alt="poster">
    </div>
    <div class="w-2/3">
        <div class="flex items-start justify-start mb-6">
            <div class="flex flex-col">
                <h1 class="text-5xl text-gray-900 mr-6 font-bold">{{ movie.title }} </h1>
                <h3 class="text-base ml-1 text-gray-500">{{ movie.release_year }}</h3>
            </div>
            <div class="flex items-center mt-2">
                <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40"
                     class="ipc-icon ipc-icon--star AggregateRatingButton__RatingIcon-sc-1ll29m0-4 iAOIoP"
                     id="iconContext-star" viewBox="0 0 24 24" fill="#F5C518" role="presentation">
                    <path d="M12 17.27l4.15 2.51c.76.46 1.69-.22 1.49-1.08l-1.1-4.72 3.67-3.18c.67-.58.31-1.68-.57-1.75l-4.83-.41-1.89-4.46c-.34-.81-1.5-.81-1.84 0L9.19 8.63l-4.83.41c-.88.07-1.24 1.17-.57 1.75l3.67 3.18-1.1 4.72c-.2.86.73 1.54 1.49 1.08l4.15-2.5z"></path>
                </svg>
                <p>{{ movie.rating }}/10</p>
            </div>
        </div>
        <p>{{ movie.description }}</p>
    </div>
</div>
<div class="reviews mt-6 w-1/2 mx-auto">
    <div class="flex flex-col w-full border-opacity-50">
        <div class="divider">Reviews</div>
    </div>

    <div class="flex justify-start mt-6 mb-12 items-start">
        <div class=" mt-6 mr-3">
            <div class="w-20 h-20 rounded-full bg-indigo-500 flex justify-center items-center">
                <div class="text-white text-3xl">{{ user.username|make_list|first|upper}}</div>
            </div>
        </div>
        <form action="" method="post" class="w-full mb-6">
            {% csrf_token %}

            <div class="form-control">

                <label class="appearance-none label" for="id_rating">

                </label>
                <div class="rating rating-md bg-none" id="id_rating">
                    <input type="radio" name="rating" value="1" class="appearance-none mask mask-star-2 bg-indigo-400">
                    <input type="radio" name="rating" value="2" class="appearance-none mask mask-star-2 bg-indigo-400">
                    <input type="radio" name="rating" value="3" class="appearance-none mask mask-star-2 bg-indigo-400">
                    <input type="radio" name="rating" value="4" class="appearance-none mask mask-star-2 bg-indigo-400">
                    <input type="radio" name="rating" value="5" class="appearance-none mask mask-star-2 bg-indigo-400">
                    <div class="text-red-500 text-xs italic mt-1 ml-1">{{ form.rating.errors }}</div>
                </div>


                <textarea class="textarea mt-1 h-24 textarea-bordered" name="body" id="id_body"
                          placeholder="Your review">{% if form.body.value != None %}{{ form.body.value|stringformat:'s' }}{% endif %}</textarea>
                <div class="text-red-500 text-xs italic mt-1 ml-1">
                    {{ form.body.errors }}
                </div>
                <label class="label justify-end">
                    <input class="btn btn-primary" type="submit" value="Submit">
                </label>
            </div>
        </form>
    </div>
    {% for review in movie.review_set.all %}
    <div class="flex justify-center items-center">
        <div class="mr-6">
        <div class="w-14 h-14 rounded-full bg-indigo-500 flex justify-center items-center">
            <div class="text-white text-3xl"></div>
        </div>
    </div>
        <div class="mb-6 mt-1 card bg-base-100 w-full shadow-xl">
            <div class="card-body">
                <h2 class="card-title">Test title</h2>
                <div class="rating rating-md bg-none">
                    {% for i in "x"|rjust:review.rating %}
                    <input name="rating" class="animation-none appearance-none mask mask-star-2 bg-indigo-400">
                    {% endfor %}
                </div>
                <p>{{ review.body }}</p>
            </div>
        </div>
    </div>
        {% endfor %}
</div>
{% endblock %}}